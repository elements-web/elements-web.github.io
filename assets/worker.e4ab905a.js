var e=Object.defineProperty,t=(t,r,n)=>(((t,r,n)=>{r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[r]=n})(t,"symbol"!=typeof r?r+"":r,n),n);import{b as r,c as n,e as o}from"./vendor.bc4f8385.js";import{r as i}from"./index.06df7f2c.js";import{c as s,e as p,a as d}from"./server.850431cf.js";const m=Object.create(null),a="ElementsDevices";const l=class{getName(){return a}diskSpace(e,t){t(0,0)}isReadOnly(){return!0}supportsLinks(){return!1}supportsProps(){return!1}supportsSynch(){return!1}stat(e,t,r){throw new Error("Method not implemented.")}statSync(e,t){throw new Error("Method not implemented.")}open(e,t,r,n){throw new Error("Method not implemented.")}openSync(e,t,r){throw new Error("Method not implemented.")}readdir(e,t){throw new Error("Method not implemented.")}readdirSync(e){throw new Error("Method not implemented.")}exists(e,t){throw new Error("Method not implemented.")}existsSync(e){throw new Error("Method not implemented.")}realpath(e,t,r){throw new Error("Method not implemented.")}realpathSync(e,t){throw new Error("Method not implemented.")}truncate(e,t,r){throw new Error("Method not implemented.")}truncateSync(e,t){throw new Error("Method not implemented.")}readFile(e,t,r,n){throw new Error("Method not implemented.")}readFileSync(e,t,r){throw new Error("Method not implemented.")}writeFile(e,t,r,n,o,i){throw new Error("Method not implemented.")}writeFileSync(e,t,r,n,o){throw new Error("Method not implemented.")}appendFile(e,t,r,n,o,i){throw new Error("Method not implemented.")}appendFileSync(e,t,r,n,o){throw new Error("Method not implemented.")}chmod(e,t,r,n){throw new Error("Method not implemented.")}chmodSync(e,t,r){throw new Error("Method not implemented.")}chown(e,t,r,n,o){throw new Error("Method not implemented.")}chownSync(e,t,r,n){throw new Error("Method not implemented.")}utimes(e,t,r,n){throw new Error("Method not implemented.")}utimesSync(e,t,r){throw new Error("Method not implemented.")}link(e,t,r){throw new Error("Method not implemented.")}linkSync(e,t){throw new Error("Method not implemented.")}symlink(e,t,r,n){throw new Error("Method not implemented.")}symlinkSync(e,t,r){throw new Error("Method not implemented.")}readlink(e,t){throw new Error("Method not implemented.")}readlinkSync(e){throw new Error("Method not implemented.")}};let h=l;t(h,"Name",a),t(h,"Options",{}),t(h,"Create",((e,t)=>t(null,new l))),t(h,"isAvailable",(()=>!0)),["rename","unlink","rmdir","mkdir"].forEach((e=>{return(t=h.prototype)[(n=e)+"Sync"]=()=>{const e=r.exports.Errors.ErrorCode.ENOTSUP,t=r.exports.Errors.ErrorStrings[e];throw new r.exports.Errors.ApiError(e,t)},void(t[n]=(...e)=>{try{t[n+"Sync"]()}catch(r){e.pop()(r)}});var t,n})),r.exports.install(m),r.exports.registerFileSystem(a,h);const w=new Promise(((e,t)=>r.exports.configure({fs:"MountableFileSystem",options:{"/tmp":{fs:"InMemory"},"/home":{fs:"IndexedDB",options:{storeName:"elementsFS"}},"/dev":{fs:a}}},(r=>r&&(t(r),!0)||e())))),c=n.initialize({wasmURL:o,worker:!0}),u={get fs(){return m.require("fs")},get buffer(){return m.Buffer}},y=i();Object.defineProperty(globalThis,y,{enumerable:!1,value:u});const E={name:"import-plugin",setup(e){e.onResolve({filter:/.*/},(e=>{const{type:t,parsed:r}=function(e,t){if(/^https?:\/\/./.test(e))return{type:"http",parsed:e};if(/^\.\.?\/./.test(e)&&t)return{type:"http",parsed:new URL(e,t).toString()};if(Object.keys(u).includes(e))return{type:"native",parsed:`module.exports = globalThis[${JSON.stringify(y)}][${JSON.stringify(e)}];`};throw new Error(`Import path ${e} not supported`)}(e.path,e.importer);return"http"===t?{path:r,namespace:"http-url"}:"native"===t?{path:e.path,namespace:"native",pluginData:r}:void 0})),e.onLoad({filter:/.*/,namespace:"http-url"},(async e=>({contents:await fetch(e.path).then((e=>e.text()))}))),e.onLoad({filter:/.*/,namespace:"native"},(async e=>({contents:e.pluginData})))}};const f={async exec(e){const t=await(async e=>{await c,await w;const t=await n.build({bundle:!0,splitting:!1,entryPoints:[e],plugins:[E]});return(new TextDecoder).decode(t.outputFiles[0].contents)})(e);new Function(t)()}};s(p(d(self,(async(e,t,r)=>{try{r(null,await f[e](t))}catch(n){r(n)}}))));
