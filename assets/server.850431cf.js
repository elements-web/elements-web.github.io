var e=e=>{e.onmessage=s=>{try{const n=e.decode(s);if(!("method"in n))return;const{id:a,method:t,args:o}=n;e.call(t,o,((s,n)=>e.send(e.encode(s?{id:a,error:s}:{id:a,result:n}))))}catch(n){}}};function s(e){return e}var n=e=>{const n={encode:s,decode:s,send:s=>e.send(s),call:(...s)=>e.call(...s)};return e.onmessage=e=>n.onmessage(e),n};function a(e,s){const n={send(s){e.postMessage(s)},call:s};return e.addEventListener("message",(({data:e})=>n.onmessage(e))),n}export{a,e as c,n as e};
